/*!
 * sugar.js v1.1.3
 * (c) 2016 TANG
 * Released under the MIT license
 * https://github.com/tangbc/sugar
 * Sat Jul 09 2016 08:26:07 GMT+0800 (CST)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Sugar=e()}(this,function(){"use strict";function t(t){return"[object Object]"===K.toString.call(t)}function e(t){return Array.isArray(t)}function i(t){return t instanceof Function}function n(t){return"string"==typeof t}function s(t){return"boolean"==typeof t}function a(t){return"number"==typeof t&&!isNaN(t)}function r(e){return e&&t(e)&&!e.nodeType&&e!==e.window?!e.constructor||H.call(e.constructor.prototype,"isPrototypeOf"):!1}function o(t){return 0===Object.keys(t).length}function c(){}function h(t,e){return z.isFunc(e)&&/\b\.Super\b/.test(Function.prototype.toString.call(e))?function(){this.Super=t,e.apply(this,arguments)}:e}function u(){}function l(t){return t.charAt(0).toUpperCase()+t.substr(1)}function p(t){var e=null;return z.each(Q,function(i){return(i._&&i._.name)===t?(e=i,!1):void 0}),e}function f(){this.busy=!1,this.queue=[]}function d(){this.$map={},this.$guid=1e3,this.$listeners={}}function v(t,e){for(var i=t.$data.$els,n=e.childNodes,s=0;s<n.length;s++){var a=n[s];if(t.isElementNode(a)){for(var r=a.attributes,o=0;o<r.length;o++){var c=r[o];"v-el"===c.name&&z.hasOwn(i,c.value)&&(i[c.value]=null)}a.childNodes.length&&v(t,a)}}}function m(t,e,i){z.each(e.split(" "),function(e){i?nt.removeClass(t,e):nt.addClass(t,e)})}function g(t){this.vm=t}function y(t,e,i,n){z.isString(e)&&(e=i[e]),this.$args=n,this.$context=i,this.$callback=e,this.$subPaths=[],this.$action=921,this.$methods="push|pop|shift|unshift|splice|sort|reverse".split("|"),this.observe(t)}function b(t){this.$model=t,this.$modelSubs={},this.$accessSubs={},this.$indexSubs={},this.$deepSubs={},this.observer=new y(t,"change",this)}function x(t){return gt.test(t)&&!dt.test(t)&&0!==t.indexOf("Math.")}function w(t){var e=yt.length;return yt[e]=t,'"'+e+'"'}function $(t,e){return yt[e]}function S(t){var e=t.charAt(0),i=t.slice(1);return ut.test(i)?t:(i=-1!==i.indexOf('"')?i.replace(ft,$):i,e+"scope."+i)}function C(t,e){var i,n=e;return-1!==n.indexOf(t.alias)?t.alias:(z.each(t.aliases,function(t){return new RegExp("\\b"+t+"\\b|\\b"+t+"\\.").test(n)?(i=t,!1):void 0}),i)}function O(){}function A(){}function _(t){var e,i,n=z.removeSpace(t),s=n.match(/(\(.*\))/),a=s&&s[0];return a?(i=n.substr(0,n.indexOf(a)),e="["+a.substr(1,a.length-2)+"]"):i=n,{func:i,args:e}}function E(t){var e,i=t.trim();if(/^\{.*\}$/.test(i)){e={};var n=i.length;i=i.substr(1,n-2).replace(/\s/g,"");var s=i.match(/[^,]+:[^:]+((?=,[^:]+:)|$)/g);z.each(s,function(t){var i=z.getKeyValue(t,!0),n=i[0],s=i[1];n&&s&&(n=n.replace(/(^'*)|('*$)|(^"*)|("*$)/g,""),e[n]=s)})}return e}function k(t){this.vm=t,A.call(this)}function N(t){this.vm=t,A.call(this)}function j(t){this.vm=t,A.call(this)}function R(t){this.vm=t,A.call(this)}function F(t){this.vm=t,A.call(this)}function T(t){this.vm=t,A.call(this)}function D(t){this.vm=t,A.call(this)}function M(t){this.vm=t,A.call(this)}function P(t){this.vm=t,A.call(this)}function L(t){this.vm=t,this.vclass=new M(t),this.vstyle=new P(t),A.call(this)}function q(t,e){return nt.hasAttr(t,"number")?+e:e}function I(t){for(var e=[],i=t.options,n=nt.hasAttr(t,"number"),s=0;s<i.length;s++){var a=i[s],r=a.value;a.selected&&e.push(n?+r:q(a,r))}return e}function V(t){this.vm=t,A.call(this)}function B(t,e){return this.isElementNode(t)?z.isObject(e)?(this.$element=t,this.$fragment=z.nodeToFragment(this.$element),this.$data=e,z.defRec(e,"$els",{}),z.defRec(e,"$scope",{}),this.$unCompileNodes=[],this.$rootComplied=!1,this.updater=new g(this),this.watcher=new b(this.$data),this.von=new k(this),this.vel=new N(this),this.vif=new j(this),this.vfor=new R(this),this.vtext=new F(this),this.vhtml=new T(this),this.vshow=new D(this),this.vbind=new L(this),this.vmodel=new V(this),this.$inputs="input|select|textarea".split("|"),void this.init()):z.warn("model must be a type of Object: ",e):z.warn("element must be a type of DOMElement: ",t)}function U(t,e,i){var n=this.context=i||this;z.each(e,function(t,i){z.isFunc(t)&&(e[i]=t.bind(n))}),this.backup=z.copy(e),this.vm=new B(t,e),this.$=this.vm.$data}function J(){this.util=z,this.ajax=G,this.core=it,this.Module=tt,this.Component=Ft}var K=Object.prototype,H=K.hasOwnProperty,z={isBool:s,isFunc:i,isArray:e,isEmpty:o,isNumber:a,isObject:t,isString:n};z.warn=function(){console.warn.apply(console,arguments)},z.error=function(){console.error.apply(console,arguments)},z.hasOwn=function(t,e){return t&&H.call(t,e)},z.def=function(t,e,i,n,s,a){return Object.defineProperty(t,e,{value:i,writable:!!n,enumerable:!!s,configurable:!!a})},z.defRec=function(t,e,i){return this.def(t,e,i,!0,!1,!0)},z.clear=function(t){this.each(t,function(){return null})},z.each=function(i,s,a){var r,o,c=this;if(i)if(a||(a=this),n(s)&&(s=a[s]),e(i))for(o=0;o<i.length&&(r=s.call(a,i[o],o,i),r!==!1);o++)null===r&&(i.splice(o,1),o--);else if(t(i))for(o in i)if(c.hasOwn(i,o)){if(r=s.call(a,i[o],o,i),r===!1)break;null===r&&delete i[o]}},z.extend=function(){var t,n,a,o,c,h,u=arguments,l=this,p=arguments[0]||{},f=1,d=arguments.length,v=!1;for(s(p)&&(v=p,p=arguments[f]||{},f++),"object"==typeof p||i(p)||(p={}),f===d&&(p=this,f--);d>f;f++)if(null!=(t=u[f]))for(n in t)a=p[n],o=t[n],p!==o&&(v&&o&&(r(o)||(c=e(o)))?(c?(c=!1,h=a&&e(a)?a:[]):h=a&&r(a)?a:{},p[n]=l.extend(v,h,o)):void 0!==o&&(p[n]=o));return p},z.copy=function(i){var n;return e(i)?n=i.slice(0):t(i)&&(n=this.extend(!0,{},i)),n||i},z.removeSpace=function(t){return t.replace(/\s/g,"")},z.getKeyValue=function(t,e){var i=t.split(":");return e?i:i.pop()},z.createElement=function(t){return document.createElement(t)},z.createFragment=function(){return document.createDocumentFragment()},z.nodeToFragment=function(t){for(var e,i=this.createFragment();e=t.firstChild;)i.appendChild(e);return i},z.stringToFragment=function(t){var e,i;return/<[^>]+>/g.test(t)?(e=this.createElement("div"),e.innerHTML=t,i=this.nodeToFragment(e)):(i=this.createFragment(),i.appendChild(document.createTextNode(t))),i},z.getExpAlias=function(t){var e=t.indexOf(".");return-1===e?t:t.substr(0,e)},z.getExpKey=function(t){var e=t.lastIndexOf(".");return-1===e?"":t.substr(e+1)},z.diff=function(t,e){return{n:this.getUnique(t,e),o:this.getUnique(e,t)}},z.getUnique=function(i,n){var s={};return this.each(i,function(i,a){var r,c=n[a];if(t(i))r=this.getUnique(i,c),o(r)||(s[a]=r);else if(e(i)){var h=[];this.each(i,function(e,i){var n;t(e)?(n=this.getUnique(e,c[i]),h.push(n)):-1===c.indexOf(e)&&h.push(e)},this),s[a]=h}else i!==c&&(s[a]=i)},this),s},z.makePaths=function(t){var e,i=this,n=t&&t.split("*");if(!n||n.length<2)return[];for(var s=n.length-1;s>-1;s--)if(i.isNumber(+n[s])){e=s+1;break}return n.slice(0,e)},z.getDeepValue=function(t,e){for(var i=e.slice(0);i.length;)t=t[i.shift()];return t},z.makeScopePaths=function(t){var e=0,i=[];if(t.length%2===0)for(;e<t.length;)e+=2,i.push(t.slice(0,e));return i};var Z=c.prototype;Z._execute=function(t,e,i,n,s,a){var r=a||this,o=new XMLHttpRequest;o.open(i,e,!0),o.onreadystatechange=function(){var e,i=null,n=null,a=o.status;if(4===o.readyState){if(e=o.responseText,"text"!==t)try{e=JSON.parse(e)}catch(c){}200===a?i={success:!0,result:e}:n={result:null,success:!1,status:a},s.call(r,n,i)}},n&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(n)},Z.get=function(t,e,i,n,s){var a=[];z.isFunc(e)&&(s=n,n=i,i=e,e=null),z.each(e,function(t,e){a.push(e+"="+encodeURIComponent(t))}),a.length&&(t=t+"?"+a.join("&")),this._execute(s||"json",t,"GET",null,i,n)},Z.post=function(t,e,i,n){this._execute("json",t,"POST",e?JSON.stringify(e):null,i,n)},Z.load=function(t,e,i,n){this.get(t,e,i,n,"text")};var G=new c,Q={id:1,length:0};u.extend=function(t){function e(t,e){var i=n[t];z.isFunc(i)&&i.apply(this,e)}function i(){}var n=this.prototype,s=i.prototype=Object.create(n);return z.each(t,function(t,i){s[i]=h(e,t)}),t=null,i.extend=this.extend,s.constructor=i,i};var W,X=f.prototype;X.createMsg=function(t,e,i,n){return{type:t,from:e,to:null,count:0,name:i,param:n,method:"on"+l(i),returns:null}},X.trigger=function(t,e){var i=t[e.method];return z.isFunc(i)?(e.to=t,++e.count,i.call(t,e)):void 0},X.notifySender=function(t,e,i){z.isFunc(e)&&e.call(i,t),this.queue.length?setTimeout(this.sendQueue,0):this.busy=!1},X.sendQueue=function(){var t=W.queue.shift();if(W.busy=!1,!t)return!1;var e=t.shift(),i=W[e];i.apply(W,t)},X.fire=function(t,e,i,n,s){var a=this,r="fire";if(this.busy)return void this.queue.push([r,t,e,i,n,s]);this.busy=!0;for(var o=this.createMsg(r,t,e,i),c=t.getParent();c;){var h=a.trigger(c,o);if(h===!1)return void a.notifySender(o,n,s);o.from=c,c=c.getParent()}this.notifySender(o,n,s)},X.broadcast=function(t,e,i,n,s){var a=this,r="broadcast";if(this.busy)return void this.queue.push([r,t,e,i,n,s]);this.busy=!0;for(var o=this.createMsg(r,t,e,i),c=t.getChilds(!0).slice(0);c.length;){var h=c.shift(),u=a.trigger(h,o);u!==!1&&(o.from=h,Array.prototype.push.apply(c,h.getChilds(!0)))}this.notifySender(o,n,s)},X.notify=function(t,e,i,n,s,a){var r="notify";if(this.busy)return void this.queue.push([r,t,e,i,n,s,a]);if(this.busy=!0,z.isString(e)){var o,c=e.split("."),h=p(c.shift());c.length?z.each(c,function(t){return o=h.getChild(t),h=o,null}):o=h,h=null,z.isObject(o)&&(e=o)}var u=this.createMsg(r,t,i,n);return z.isObject(e)?(this.trigger(e,u),void this.notifySender(u,s,a)):(this.notifySender(u,s,a),z.warn("Component: ["+e+"] is not exist!"))},X.globalCast=function(t,e,i,n){var s="globalCast";if(this.busy)return void this.queue.push([s,t,e,i,n]);this.busy=!0;var a=this.createMsg(s,"__core__",t,e);z.each(Q,function(t,e){z.isObject(t)&&"0"!==e&&this.trigger(t,a)},this),this.notifySender(a,i,n)},W=new f;var Y=W,tt=u.extend({_:{},create:function(t,e,i){if(!z.isString(t))return z.warn("Module name ["+t+"] must be a type of String");if(!z.isFunc(e))return z.warn("Module Class ["+e+"] must be a type of Component");var n=this._;if(z.hasOwn(n,"childArray")||(n.childArray=[],n.childMap={}),n.childMap[t])return z.warn("Module ["+t+"] is already exists!");var s=new e(i),a={name:t,id:Q.id++,pid:n.id||0};return s._=a,Q[a.id]=s,Q.length++,n.childArray.push(s),n.childMap[t]=s,z.isFunc(s.init)&&s.init(i,this),s},getParent:function(){var t=this._,e=t&&t.pid;return Q[e]||null},getChild:function(t){var e=this._;return e&&e.childMap&&e.childMap[t]||null},getChilds:function(t){var e=this._;return t=z.isBool(t)&&t,t?e.childArray||[]:e.childMap||{}},_removeChild:function(t){for(var e=this._,i=e.childMap||{},n=e.childArray||[],s=i[t],a=0,r=n.length;r>a;a++)if(n[a].id===s.id){delete i[t],n.splice(a,1);break}},destroy:function(t){var e=this._,i=e.name;z.isFunc(this.beforeDestroy)&&this.beforeDestroy();var n=this.getChilds(!0);z.each(n,function(t){z.isFunc(t.destroy)&&t.destroy(-1)});var s=this.getParent();-1!==t&&s&&s._removeChild(i);var a=e.id;z.hasOwn(Q,a)&&(delete Q[a],Q.length--),z.isFunc(this.afterDestroy)&&this.afterDestroy(),t===!0&&this.fire("subDestroyed",i),z.clear(this)},fire:function(t,e,i){z.isFunc(e)&&(i=e,e=null),z.isString(i)&&(i=this[i]),Y.fire(this,t,e,i,this)},broadcast:function(t,e,i){z.isFunc(e)&&(i=e,e=null),z.isString(i)&&(i=this[i]),Y.broadcast(this,t,e,i,this)},notify:function(t,e,i,n){z.isFunc(i)&&(n=i,i=null),z.isString(n)&&(n=this[n]),Y.notify(this,t,e,i,n,this)}}),et=tt.extend({get:function(t){return this.getChild(t)},globalCast:function(t,e,i,n){z.isFunc(e)&&(n=i,i=e,e=null),Y.globalCast(t,e,i,n)},destroy:function(){}}),it=Q[0]=new et,nt={empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},setAttr:function(t,e,i){"boolean"==typeof i?t[e]=i:i!==this.getAttr(t,e)&&t.setAttribute(e,i)},getAttr:function(t,e){return t.getAttribute(e)||""},hasAttr:function(t,e){return t.hasAttribute(e)},removeAttr:function(t,e){t.removeAttribute(e)},addClass:function(t,e){var i,n=t.classList;this.hasClass(t,e)||(n?n.add(e):(i=" "+this.getAttr(t,"class")+" ",-1===i.indexOf(" "+e+" ")&&this.setAttr(t,"class",(i+e).trim())))},removeClass:function(t,e){var i,n,s=t.classList;if(this.hasClass(t,e)){if(s)s.remove(e);else{for(n=" "+e+" ",i=" "+this.getAttr(t,"class")+" ";-1!==i.indexOf(n);)i=i.replace(n," ");this.setAttr(t,"class",i.trim())}t.className||this.removeAttr(t,"class")}},hasClass:function(t,e){var i,n=t.classList;return n?n.contains(e):(i=" "+this.getAttr(t,"class")+" ",-1!==i.indexOf(" "+e+" "))},addEvent:function(t,e,i,n){t.addEventListener(e,i,n)},removeEvent:function(t,e,i,n){t.removeEventListener(e,i,n)}},st=d.prototype;st.guid=function(){return this.$guid++},st.add=function(t,e,i,n,s){var a=this.$map,r=this.guid(),o=this.$listeners;a[r]=i,o[r]=function(t){i.call(s||this,t)},nt.addEvent(t,e,o[r],n)},st.remove=function(t,e,i,n){var s,a=this.$map,r=this.$listeners;z.each(a,function(t,e){return t===i?(s=e,!1):void 0}),s&&(nt.removeEvent(t,e,r[s],n),delete a[s],delete r[s])},st.clear=function(){this.$guid=1e3,z.clear(this.$map),z.clear(this.$listeners)};var at=new d,rt=g.prototype;rt.updateTextContent=function(t,e){t.textContent=String(e)},rt.updateHtmlContent=function(t,e){nt.empty(t).appendChild(z.stringToFragment(String(e)))},rt.updateDisplay=function(t,e){var i=this.getSibling(t);this.setVisible(t),this.updateStyle(t,"display",e?t._visible_display:"none"),i&&(nt.hasAttr(i,"v-else")||"v-else"===i._directive)&&(this.setVisible(i),this.updateStyle(i,"display",e?"none":i._visible_display))},rt.setVisible=function(t){if(!t._visible_display){var e,i=z.removeSpace(nt.getAttr(t,"style"));if(i&&-1!==i.indexOf("display")){var n=i.split(";");z.each(n,function(t){-1!==t.indexOf("display")&&(e=z.getKeyValue(t))})}"none"!==e&&(t._visible_display=e||"")}},rt.updateRenderContent=function(t,e){var i=this.getSibling(t);this.setRender(t),this.toggleRender.apply(this,arguments),i&&(nt.hasAttr(i,"v-else")||"v-else"===i._directive)&&(this.setRender(i),this.toggleRender(i,!e))},rt.setRender=function(t){t._render_content||(t._render_content=t.innerHTML),nt.empty(t)},rt.toggleRender=function(t,e){var i=this.vm,n=z.stringToFragment(t._render_content);e?(i.complieElement(n,!0),t.appendChild(n)):v(i,n)},rt.getSibling=function(t){var e=t.nextSibling,i=this.vm.isElementNode;if(e&&i(e))return e;for(;e;)if(e=e.nextSibling,e&&i(e))return e;return null},rt.updateAttribute=function(t,e,i){null===i?nt.removeAttr.apply(this,arguments):"value"===e?t.value=i:nt.setAttr(t,e,i)},rt.updateClassName=function(t,e,i,n){n?e===!0?m(t,n):e===!1&&m(t,n,!0):(e&&m(t,e),i&&m(t,i,!0))},rt.updateStyle=function(t,e,i){t.style[e]!==i&&(t.style[e]=i)},rt.updateEvent=function(t,e,i,n,s){s?at.remove(t,e,i,n):at.add(t,e,i,n)},rt.updateTextValue=function(t,e){t.value!==e&&(t.value=e)},rt.updateRadioChecked=function(t,e){t.checked=t.value===(z.isNumber(e)?String(e):e)},rt.updateCheckboxChecked=function(t,e){var i=t.value;return z.isArray(e)||z.isBool(e)?(nt.hasAttr(t,"number")&&(i=+i),void(t.checked=z.isBool(e)?e:-1!==e.indexOf(i))):z.warn("Checkbox v-model value must be a type of Boolean or Array")},rt.updateSelectChecked=function(t,e,i){for(var n=nt.hasAttr(t,"number"),s=t.options,a=s.length,r=i||nt.hasAttr(t,"multiple"),o=0;a>o;o++){var c=s[o],h=c.value;h=n?+h:nt.hasAttr(c,"number")?+h:h,c.selected=r?-1!==e.indexOf(h):e===h}};var ot=y.prototype;ot.observe=function(t,e){return z.isArray(t)&&this.rewriteMethods(t,e),z.each(t,function(i,n){var s=e&&e.slice(0);s?s.push(n):s=[n],this.bindWatch(t,s,i)},this),this},ot.bindWatch=function(t,e,i){var n=e.join("*"),s=e[e.length-1],a=Object.getOwnPropertyDescriptor(t,s),r=a.get,o=a.set;Object.defineProperty(t,s,{get:function(){return r?r.call(t):i}.bind(this),set:function(a,c){var h,u,l,p=r?r.call(t):i,f=-1!==this.$methods.indexOf(this.$action);a!==p&&(f||!z.isArray(a)&&!z.isObject(a)||this.observe(a,e),h=this.getSubPath(n),h&&(u=t[s]),o?o.call(t,a,!0):i=a,f||c||(l=h?[h,t[s],u]:[n,a,p],this.trigger.apply(this,l)))}.bind(this)});var c=t[s],h=z.isObject(c);(z.isArray(c)||h)&&this.observe(c,e),h&&-1===this.$subPaths.indexOf(n)&&!z.isNumber(+n.split("*").pop())&&this.$subPaths.push(n)},ot.getSubPath=function(t){for(var e=this.$subPaths,i=0;i<e.length;i++)if(0===t.indexOf(e[i]))return e[i]},ot.rewriteMethods=function(t,e){var i=Array.prototype,n=Object.create(i),s=e&&e.join("*");z.each(this.$methods,function(t){var a=this,r=i[t];z.defRec(n,t,function(){for(var i,n=arguments,o=arguments.length,c=new Array(o);o--;)c[o]=n[o];return a.$action=t,i=r.apply(this,c),a.$action=921,a.observe(this,e),a.trigger(s,this,t,c),i})},this),z.defRec(n,"$set",function(t,e){return t>=this.length&&(t=this.length),this.splice(t,1,e)[0]}),z.defRec(n,"$remove",function(t){var e=this.indexOf(t);return-1!==e?this.splice(e,1):void 0}),t.__proto__=n},ot.trigger=function(t,e,i,n){this.$callback.apply(this.$context,[t,e,i,n||this.$args])},ot.destroy=function(){this.$args=this.$context=this.$callback=this.$subPaths=this.$action=this.$methods=null};var ct=b.prototype;ct.change=function(t,e,i,n){var s=-1!==t.indexOf("*"),a=s?this.$accessSubs[t]:this.$modelSubs[t];if(this.trigger(a,t,e,i,n),s){var r=t.split("*").shift();this.trigger(this.$deepSubs[r],t,e,i,n)}},ct.trigger=function(t,e,i,n,s){z.each(t,function(t){t.cb.call(t.ct,e,i,n,s||t.arg)})},ct.watch=function(t,e,i,n){var s=t.dep,a=t.acc;z.each(s,function(t,s){var r=a[s];if("$event"!==t)return-1!==t.indexOf("$index")?void this.watchIndex(r,e,i,n):r?void this.watchAccess(r,e,i,n):void this.watchModel(z.getExpAlias(t),e,i,n)},this)},ct.watchModel=function(t,e,i,n,s){return z.hasOwn(this.$model,t)?-1!==t.indexOf("*")?z.warn("model ["+t+"] cannot contain the character *"):(this.addSubs(this.$modelSubs,t,e,i,n),void(s&&this.addSubs(this.$deepSubs,t,e,i,n))):z.warn("the field: ["+t+"] does not exist in model")},ct.watchAccess=function(t,e,i,n){this.addSubs(this.$accessSubs,t,e,i,n)},ct.watchIndex=function(t,e,i,n){this.addSubs(this.$indexSubs,t,e,i,n)},ct.addSubs=function(t,e,i,n,s){t[e]||(t[e]=[]),t[e].push({cb:i,ct:n,arg:s})},ct.removeSubs=function(t){z.each(this.$indexSubs,function(e,i){return 0===i.indexOf(t)?null:void 0}),z.each(this.$accessSubs,function(e,i){return 0===i.indexOf(t)?null:void 0})},ct.moveSubs=function(t,e,i){var n=t+"*";this.moveIndex(n,e),this.moveAccess(n,e)},ct.moveIndex=function(t,e){var i={},n=this.$indexSubs,s=z.copy(n);z.each(e,function(e,a){var r,o=t+a,c=t+e;i[o]=s[c],e===r&&(n[o]=r)}),z.each(i,function(e,i){var n=+i.substr(t.length);z.each(e,function(t){t.cb.call(t.ct,"$index",n,t.arg)})}),z.extend(n,i),i=s=null},ct.moveAccess=function(t,e){var i={},n=this.$accessSubs,s=z.copy(n);z.each(e,function(e,a){var r,o=[],c=[],h=t+a,u=t+e;z.each(n,function(t,i){e===r&&0===i.indexOf(h)?(c.push(r),o.push(i)):0===i.indexOf(u)&&(c.push(i),o.push(i.replace(u,h)))}),z.each(o,function(t,e){var a=c[e];a===r?n[t]=r:i[t]=s[a]})}),z.extend(n,i),i=s=null},ct.destroy=function(){z.clear(this.$modelSubs),z.clear(this.$accessSubs),z.clear(this.$indexSubs),z.clear(this.$deepSubs),this.observer.destroy()};var ht="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",ut=new RegExp("^("+ht.replace(/\./g,"\\b|")+"\\b)"),lt="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",pt=new RegExp("^("+lt.replace(/\./g,"\\b|")+"\\b)"),ft=/"(\d+)"/g,dt=/^(true|false)$/,vt=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,mt=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,gt=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,yt=[],bt=A.prototype;bt.bind=function(t,e,i){var n=this.getDeps(t,i),s=this.getScope(t,i),a=this.getEval(t,i),r=t&&z.copy(t.maps);this.update(e,a.call(s,s)),this.vm.watcher.watch(n,function(){s=this.updateScope(s,r,n,arguments),this.update(e,a.call(s,s))},this)},bt.createGetter=function(t){try{return new Function("scope","return "+t+";")}catch(e){return z.error("Invalid generated expression: "+t),O}},bt.getEval=function(t,e){return pt.test(e)?(z.warn("Avoid using unallow keyword in expression ["+e+"]"),O):(e=this.toScope(e),t&&z.each(t.aliases,function(t){var i=new RegExp("scope."+t,"g");e=e.replace(i,function(t){return"scope.$"+t})}),this.createGetter(e))},bt.toScope=function(t){var e=t;return x(e)?"scope."+e:(e=(" "+e).replace(vt,w),e=e.replace(mt,S),e=e.replace(ft,$))},bt.getModel=function(){return this.vm.$data},bt.getScope=function(t,e){var i=this.getModel();return t&&(z.defRec(i,"$index",t.index),z.defRec(i,"$scope",t.scopes)),i},bt.updateScope=function(t,e,i,n){var s,a,r=0,o={},c=this.getModel(),h=z.copy(i.acc);return h.unshift(n[0]),z.each(h,function(t){var e=z.makePaths(t);e.length>r&&(s=e,r=e.length)}),s&&(a=z.makeScopePaths(s),z.each(a,function(t){var i=t.length;"$index"===n[0]&&(t[i-1]=n[1]);var s=t[i-2],a=+t[i-1],r=z.getDeepValue(c,t)||{};z.defRec(c,"$index",a),o[e[s]]=r}),z.defRec(c,"$scope",z.extend(t.$scope,o))),c},bt.getDeps=function(t,e){var i=[],n=[],s=" "+e.replace(vt,w),a=s.match(mt);return z.each(a,function(e){var s,a,r,o,c=e.substr(1);t?(s=C(t,e),a=-1!==c.indexOf("$index"),(-1!==c.indexOf(s)||a)&&(r=t.accesses[t.aliases.indexOf(s)])):s=z.getExpAlias(c),a||c===s?o=r||t&&t.access:r&&"$event"!==c&&(o=r+"*"+z.getExpKey(c)),-1===i.indexOf(c)&&(i.push(c),n.push(o))}),{dep:i,acc:n}};var xt=k.prototype=Object.create(A.prototype);xt.parse=function(t,e,i,n){-1!==n.indexOf(":")?this.parseSingle.apply(this,arguments):this.parseJson.apply(this,arguments)},xt.parseSingle=function(t,e,i,n){var s=_(i),a=z.getKeyValue(n),r=s.func,o=s.args,c=this.getDeps(t,r),h=this.getScope(t,r),u=this.getEval(t,r),l=u.call(h,h);this.bindEvent(t,e,r,a,l,o),this.vm.watcher.watch(c,function(i,n,s){this.update(e,a,s,!1,!0),this.bindEvent(t,e,i,a,n,o)},this)},xt.parseJson=function(t,e,i){z.each(E(i),function(i,n){this.parseSingle(t,e,i,n)},this)},xt.bindEvent=function(t,e,i,n,s,a){var r,o,c,h,u=!1;if(z.isFunc(s)){if(-1!==n.indexOf(".")){var l=n.split(".");n=l.shift(),r=l&&-1!==l.indexOf("self"),o=l&&-1!==l.indexOf("stop"),c=l&&-1!==l.indexOf("prevent"),u=l&&-1!==l.indexOf("capture"),h=0===n.indexOf("key")?+l[0]:null}var p=[];if(a){var f=this.getDeps(t,a),d=t&&z.copy(t.maps),v=this.getScope(t,a);z.defRec(v,"$event","$event");var m=this.getEval(t,a);p=m.call(v,v),this.vm.watcher.watch(f,function(){v=this.updateScope(v,d,f,arguments),p=m.call(v,v)},this)}var g=function(t){r&&t.target!==e||h&&h!==t.keyCode||(p.length?z.each(p,function(e,i){("$event"===e||e instanceof Event)&&(p[i]=t)}):p.push(t),o&&t.stopPropagation(),c&&t.preventDefault(),s.apply(this,p))};this.update(e,n,g,u)}},xt.update=function(){var t=this.vm.updater;t.updateEvent.apply(t,arguments)};var wt=N.prototype=Object.create(A.prototype);wt.parse=function(t,e,i){if(t){var n=z.getExpAlias(i);if(n!==t.alias)return z.warn("If v-el use in v-for, it must be defined on loop body");var s=t.scopes[n];if(z.isObject(s)){var a=z.getExpKey(i);s[a]=e}}else this.vm.$data.$els[i]=e};var $t=j.prototype=Object.create(A.prototype);$t.parse=function(){this.bind.apply(this,arguments)},$t.update=function(){var t=this.vm.updater;t.updateRenderContent.apply(t,arguments)};var St=R.prototype=Object.create(A.prototype);St.parse=function(t,e,i){var n,s,a,r=this.vm,o=i.match(/(.*) in (.*)/),c=o[1],h=o[2],u=r.watcher,l=e.parentNode,p="OPTION"===e.tagName&&"SELECT"===l.tagName,f=this.getScope(t,h),d=this.getEval(t,h),v=d.call(f,f),m=h,g=z.getExpKey(h),y=-1,b={},x={},w=[],$=[];return t&&(x=t.maps,y=t.level,b=t.scopes,w=t.aliases.slice(0),$=t.accesses.slice(0),m=t.access+"*"+g),z.isArray(v)?(n=[e,v,0,m,c,w,$,b,x,++y],s=this.buildList.apply(this,n),e.parentNode.replaceChild(s,e),p&&this.updateOption(l,t),a={alias:c,aliases:w,access:m,accesses:$,scopes:b,level:y,maps:x},void(t?u.watchAccess(m,function(t,i,n,s){this.update(l,e,i,n,a,s)},this):u.watchModel(m,function(t,i,n,s){this.update(l,e,i,n,a,s)},this))):void l.removeChild(e)},St.updateOption=function(t,e){var i=t._vmodel,n=this.getEval(e,i),s=this.getScope(e,i),a=n.call(s,s);this.vm.updater.updateSelectChecked(t,a)},St.buildList=function(t,e,i,n,s,a,r,o,c,h){var u=this.vm,l=z.createFragment();return z.each(e,function(e,p){var f,d=i+p,v=n.split("*").pop(),m=t.cloneNode(!0),g=n+"*"+d;o[s]=e,a[h]=s,r[h]=g,c[v]=s,f={alias:s,aliases:a,access:g,accesses:r,scopes:o,maps:c,level:h,index:d},t._vfor_directives>1&&u.blockCompile(t),this.signAlias(m,s),u.complieElement(m,!0,f),l.appendChild(m)},this),l},St.signAlias=function(t,e){z.def(t,"_vfor_alias",e)},St.update=function(t,e,i,n,s,a){switch(n){case"push":this.push.apply(this,arguments);break;case"pop":this.pop.apply(this,arguments);break;case"unshift":this.unshift.apply(this,arguments);break;case"shift":this.shift.apply(this,arguments);break;case"splice":this.splice.apply(this,arguments);break;default:this.recompile.apply(this,arguments)}},St.updateScopes=function(t){var e=t.scopes,i=t.accesses,n=i.length;if(n>1){var s=t.maps,a=this.vm.$data,r=z.makePaths(i[n-1]);z.each(z.makeScopePaths(r),function(t){var i=t.length-2,n=s[t[i]],r=z.getDeepValue(a,t)||{};e[n]=r})}return e},St.getChanges=function(t,e){var i,n,s={};switch(t){case"unshift":for(s[0]=n,i=1;e>i;i++)s[i]=i-1;break;case"shift":for(i=0;e+1>i;i++)s[i]=i+1;s[e]=n}return s},St.push=function(t,e,i,n,s){var a=i.length-1,r=s.alias,o=[i[a]],c=this.updateScopes(s),h=[e,o,a,s.access,r,s.aliases,s.accesses,c,s.maps,s.level],u=this.getLast(t,r),l=this.buildList.apply(this,h);u?t.insertBefore(l,u.nextSibling):t.appendChild(l)},St.pop=function(t,e,i,n,s){var a=this.getLast(t,s.alias);a&&t.removeChild(a)},St.unshift=function(t,e,i,n,s){var a,r,o,c=s.alias,h=[i[0]],u=this.updateScopes(s),l=[e,h,0,s.access,c,s.aliases,s.accesses,u,s.maps,s.level];a=this.getChanges(n,i.length),this.vm.watcher.moveSubs(s.access,a),r=this.buildList.apply(this,l),o=this.getFirst(t,c),t.insertBefore(r,o)},St.shift=function(t,e,i,n,s){var a=this.getChanges(n,i.length),r=this.getFirst(t,s.alias);r&&(t.removeChild(r),this.vm.watcher.moveSubs(s.access,a))},St.splice=function(t,e,i,n,s,a){var r=a.shift(),o=a.shift(),c=a,h=a.length;if(0!==o||h){var u,l,p={},f=s.alias,d=i.length,v=o&&!h,m=!o&&h,g=o&&h;if(v){for(u=0;d>u;u++)p[u]=u>=r?u+o:u;if(z.isEmpty(p))return void this.recompile.apply(this,arguments);this.vm.watcher.moveSubs(s.access,p),this.removeEl(t,f,r,o)}else if(m||g){for(u=0;d>u;u++)m?p[u]=r>u?u:u>=r&&r+h>u?l:u-h:g&&(p[u]=r>u?u:u>=r&&r+h>u?l:u-(h-o));if(z.isEmpty(p)||0===r&&o>d)return void this.recompile.apply(this,arguments);this.vm.watcher.moveSubs(s.access,p),g&&this.removeEl(t,f,r,o);var y=this.getChild(t,f,r),b=this.updateScopes(s),x=[e,c,r,s.access,f,s.aliases,s.accesses,b,s.maps,s.level],w=this.buildList.apply(this,x);t.insertBefore(w,y)}}},St.getFirst=function(t,e){for(var i=null,n=t.childNodes,s=0;s<n.length;s++){var a=n[s];if(a._vfor_alias===e){i=a;break}}return i},St.getLast=function(t,e){for(var i=null,n=t.childNodes,s=n.length-1;s>-1;s--){var a=n[s];if(a._vfor_alias===e){i=a;break}}return i},St.getChild=function(t,e,i){for(var n=0,s=null,a=t.childNodes,r=0;r<a.length;r++){var o=a[r];if(o._vfor_alias===e){if(n===i){s=o;break}n++}}return s},St.removeEl=function(t,e,i,n){for(var s=-1,a=[],r=t.childNodes,o=0;o<r.length;o++){var c=r[o];c._vfor_alias===e&&s++,s>=i&&i+n>s&&a.push(c)}z.each(a,function(e){return t.removeChild(e),null})},St.recompile=function(t,e,i,n,s){var a,r=s.alias,o=t.childNodes,c=this.updateScopes(s),h=[e,i,0,s.access,r,s.aliases,s.accesses,c,s.maps,s.level];this.vm.watcher.removeSubs(s.access);for(var u=this.buildList.apply(this,h),l=0;l<o.length;l++){var p=o[l];p._vfor_alias===r&&(a?(l--,t.removeChild(p)):a=p)}a?t.replaceChild(u,a):t.appendChild(u)};var Ct=F.prototype=Object.create(A.prototype);Ct.parse=function(){this.bind.apply(this,arguments)},Ct.update=function(){var t=this.vm.updater;t.updateTextContent.apply(t,arguments)};var Ot=T.prototype=Object.create(A.prototype);Ot.parse=function(t,e,i){this.bind.apply(this,[t,this.vm.isTextNode(e)?e.parentNode:e,i])},Ot.update=function(){var t=this.vm.updater;t.updateHtmlContent.apply(t,arguments)};var At=D.prototype=Object.create(A.prototype);At.parse=function(){this.bind.apply(this,arguments)},At.update=function(){var t=this.vm.updater;t.updateDisplay.apply(t,arguments)};var _t=M.prototype=Object.create(A.prototype);_t.parse=function(t,e,i){var n=this.getDeps(t,i),s=this.getScope(t,i),a=this.getEval(t,i),r=t&&z.copy(t.maps),o=a.call(s,s);this.updateClass(e,o),this.vm.watcher.watch(n,function(t,i,c){s=this.updateScope(s,r,n,arguments),z.isArray(o)&&(o=[c]),this.updateClass(e,o,!0),o=a.call(s,s),this.updateClass(e,o)},this)},_t.updateClass=function(t,e,i){z.isString(e)?this.update(t,i?null:e,i?e:null):z.isArray(e)?z.each(e,function(e){this.update(t,i?null:e,i?e:null)},this):z.isObject(e)&&z.each(e,function(e,n){this.update(t,i?!1:e,!1,n)},this)},_t.update=function(){var t=this.vm.updater;t.updateClassName.apply(t,arguments)};var Et=P.prototype=Object.create(A.prototype);Et.parse=function(t,e,i){var n=this.getDeps(t,i),s=this.getScope(t,i),a=this.getEval(t,i),r=t&&z.copy(t.maps),o=a.call(s,s);this.updateStyle(e,o),this.vm.watcher.watch(n,function(t,i,o){z.isObject(o)?(z.each(o,function(t,e){o[e]=null}),this.updateStyle(e,z.extend(i,o))):(s=this.updateScope(s,r,n,arguments),this.updateStyle(e,a.call(s,s)))},this)},Et.updateStyle=function(t,e,i){return z.isObject(e)?void z.each(e,function(e,n){this.update(t,n,i?null:e)},this):z.warn("Bind for style must be a type of Object",e)},Et.update=function(){var t=this.vm.updater;t.updateStyle.apply(t,arguments)};var kt=L.prototype=Object.create(A.prototype);kt.parse=function(t,e,i,n){if(-1!==n.indexOf(":")){var s=this.vclass,a=this.vstyle,r=z.getKeyValue(n);switch(r){case"class":s.parse.apply(s,arguments);break;case"style":a.parse.apply(a,arguments);break;default:this.parseAttr(t,e,i,r)}}else this.parseJson.apply(this,arguments)},kt.parseJson=function(t,e,i){var n=this.getDeps(t,i),s=this.getScope(t,i),a=this.getEval(t,i),r=z.copy(a.call(s,s)),o=t&&z.copy(t.maps);this.updateJson(e,r),this.vm.watcher.watch(n,function(t,i,c){var h,u;s=this.updateScope(s,o,n,arguments),u=a.call(s,s),h=z.diff(u,r),this.updateJson(e,h.o,!0),this.updateJson(e,h.n),r=z.copy(u)},this)},kt.updateJson=function(t,e,i){var n=this.vclass,s=this.vstyle;z.each(e,function(e,a){switch(a){case"class":n.updateClass(t,e,i);break;case"style":s.updateStyle(t,e,i);break;default:this.update(t,a,e)}},this)},kt.parseAttr=function(t,e,i,n){var s=this.getDeps(t,i),a=this.getScope(t,i),r=this.getEval(t,i),o=t&&z.copy(t.maps);this.update(e,n,r.call(a,a)),this.vm.watcher.watch(s,function(){a=this.updateScope(a,o,s,arguments),this.update(e,n,r.call(a,a))},this)},kt.update=function(){var t=this.vm.updater;t.updateAttribute.apply(t,arguments)};var Nt=V.prototype=Object.create(A.prototype);Nt.parse=function(t,e,i){var n=this.vm,s=n.$inputs,a=e.tagName.toLowerCase(),r="input"===a?nt.getAttr(e,"type"):a;if(-1===s.indexOf(a))return z.warn("v-model only for using in "+s.join(", "));z.def(e,"_vmodel",i);var o=this.getDeps(t,i),c=this.getScope(t,i),h=this.getEval(t,i),u=z.makePaths(o.acc[0]||o.dep[0]),l=z.getDeepValue(this.vm.$data,u),p=h.call(c,c),f=z.getExpKey(i)||i,d=[e,p,o,l,f];switch(r){case"text":case"password":case"textarea":this.parseText.apply(this,d);break;case"radio":this.parseRadio.apply(this,d);break;case"checkbox":this.parseCheckbox.apply(this,d);break;case"select":this.parseSelect.apply(this,d)}},Nt.parseText=function(t,e,i,n,s){var a=this.vm,r=a.updater;r.updateTextValue(t,e),a.watcher.watch(i,function(e,i){r.updateTextValue(t,i)},this),this.bindTextEvent(t,n,s)},Nt.bindTextEvent=function(t,e,i){var n;nt.addEvent(t,"compositionstart",function(){n=!0}),nt.addEvent(t,"compositionend",function(){n=!1}),nt.addEvent(t,"input",function(){n||(e[i]=this.value)}),nt.addEvent(t,"change",function(){e[i]=this.value})},Nt.parseRadio=function(t,e,i,n,s){var a=this.vm,r=a.updater;nt.hasAttr(t,"checked")&&(n[s]=e=q(t,t.value)),r.updateRadioChecked(t,e),a.watcher.watch(i,function(e,i){r.updateRadioChecked(t,i)},this),
this.bindRadioEvent(t,n,s)},Nt.bindRadioEvent=function(t,e,i){nt.addEvent(t,"change",function(){e[i]=q(this,this.value)})},Nt.parseCheckbox=function(t,e,i,n,s){var a=this.vm,r=a.updater;nt.hasAttr(t,"checked")&&(z.isBool(e)?n[s]=e=!0:z.isArray(e)&&e.push(q(t,t.value))),r.updateCheckboxChecked(t,e),a.watcher.watch(i,function(e,i){r.updateCheckboxChecked(t,i)},this),this.bindCheckboxEvent(t,n,s,e)},Nt.bindCheckboxEvent=function(t,e,i,n){nt.addEvent(t,"change",function(){var t=this.checked;if(z.isBool(n))e[i]=t;else if(z.isArray(n)){var s=q(this,this.value),a=n.indexOf(s);t?-1===a&&n.push(s):-1!==a&&n.splice(a,1)}})},Nt.parseSelect=function(t,e,i,n,s){var a,r=this.vm.updater,o=nt.hasAttr(t,"multiple");if(z.isString(e)){if(o)return z.warn("<select> cannot be multiple when the model set ["+s+"] as not Array");a=Boolean(e)}else{if(!z.isArray(e))return z.warn("The model ["+s+"] use in <select> must be a type of String or Array");if(!o)return z.warn("The model ["+s+"] cannot set as Array when <select> has no multiple propperty");a=e.length>0}if(a)r.updateSelectChecked(t,e,o);else{var c=I(t);n[s]=o?c:c[0]}this.vm.watcher.watch(i,function(e,i){r.updateSelectChecked(t,i,o)}),this.bindSelectEvent(t,n,s,o)},Nt.bindSelectEvent=function(t,e,i,n){nt.addEvent(t,"change",function(){var t=I(this);e[i]=n?t:t[0]})};var jt=B.prototype;jt.init=function(){this.complieElement(this.$fragment,!0)},jt.complieElement=function(t,e,i){var n,s=this,a=t.childNodes;e&&this.hasDirective(t)&&this.$unCompileNodes.push([t,i]);for(var r=0;r<a.length;r++)n=a[r],s.hasDirective(n)&&s.$unCompileNodes.push([n,i]),n.childNodes.length&&!s.isLateCompile(n)&&s.complieElement(n,!1,i);e&&this.compileAll()},jt.hasDirective=function(t){var e,i=this,n=t.textContent,s=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/;if(this.isElementNode(t)){e=t.attributes;for(var a=0;a<e.length;a++)if(i.isDirective(e[a].name))return!0}else if(this.isTextNode(t)&&s.test(n))return!0},jt.compileAll=function(){z.each(this.$unCompileNodes,function(t){return this.complieDirectives(t),null},this),this.checkCompleted()},jt.complieDirectives=function(t){var e=this,i=t[0],n=t[1];if(this.isElementNode(i)){for(var s,a=[],r=i.attributes,o=0;o<r.length;o++){var c=r[o],h=c.name;e.isDirective(h)&&("v-for"===h&&(s=c),a.push(c))}s&&(z.def(i,"_vfor_directives",a.length),a=[s],s=null),z.each(a,function(t){this.compile(i,t,n)},this)}else this.isTextNode(i)&&this.compileText(i,n)},jt.compile=function(t,e,i){var n=e.name,s=e.value,a=[i,t,s,n];if(nt.removeAttr(t,n),0===n.indexOf("v-bind"))this.vbind.parse.apply(this.vbind,a);else if(0===n.indexOf("v-on"))this.von.parse.apply(this.von,a);else switch(n){case"v-el":this.vel.parse.apply(this.vel,a);break;case"v-text":this.vtext.parse.apply(this.vtext,a);break;case"v-html":this.vhtml.parse.apply(this.vhtml,a);break;case"v-show":this.vshow.parse.apply(this.vshow,a);break;case"v-if":this.vif.parse.apply(this.vif,a);break;case"v-else":z.def(t,"_directive","v-else");break;case"v-model":this.vmodel.parse.apply(this.vmodel,a);break;case"v-for":this.vfor.parse.apply(this.vfor,a);break;case"v-pre":break;default:z.warn("["+n+"] is an unknown directive!")}},jt.compileText=function(t,e){var i,n,s,a,r=[],o=t.textContent.trim().replace(/\n/g,""),c=/\{\{\{(.+?)\}\}\}/g,h=/\{\{(.+?)\}\}/g;if(c.test(o)){if(s=o.match(c),n=s[0],i=n.replace(/\s\{|\{|\{|\}|\}|\}/g,""),n.length!==o.length)return z.warn("["+o+"] compile for HTML can not have a prefix or suffix");this.vhtml.parse.call(this.vhtml,e,t,i)}else a=o.split(h),s=o.match(h),z.each(a,function(t){-1!==s.indexOf("{{"+t+"}}")?r.push("("+t+")"):t&&r.push('"'+t+'"')}),this.vtext.parse.call(this.vtext,e,t,r.join("+"))},jt.blockCompile=function(t){z.each(this.$unCompileNodes,function(e){return t===e[0]?null:void 0})},jt.isElementNode=function(t){return 1===t.nodeType},jt.isTextNode=function(t){return 3===t.nodeType},jt.isDirective=function(t){return 0===t.indexOf("v-")},jt.isLateCompile=function(t){return nt.hasAttr(t,"v-if")||nt.hasAttr(t,"v-for")||nt.hasAttr(t,"v-pre")},jt.checkCompleted=function(){0!==this.$unCompileNodes.length||this.$rootComplied||this.rootCompleted()},jt.rootCompleted=function(){this.$rootComplied=!0,this.$element.appendChild(this.$fragment)},jt.destroy=function(){this.watcher.destroy(),nt.empty(this.$element),this.$fragment=this.$data=this.$unCompileNodes=this.updater=this.$inputs=null,this.von=this.vel=this.vif=this.vfor=this.vtext=this.vhtml=this.vshow=this.vbind=this.vmodel=null};var Rt=U.prototype;Rt.get=function(t){return z.isString(t)?this.$[t]:this.$},Rt.getItem=function(t){return z.copy(this.get(t))},Rt.set=function(t,e){var i=this.$;z.isString(t)&&(i[t]=e),z.isObject(t)&&z.each(t,function(t,e){i[e]=t})},Rt.reset=function(t){var e=this.$,i=this.backup;z.isString(t)?e[t]=i[t]:z.isArray(t)?z.each(t,function(t){e[t]=i[t]}):z.each(e,function(t,n){e[n]=i[n]})},Rt.watch=function(t,e,i){this.vm.watcher.watchModel(t,function(t,i,n){e.call(this,t,i,n)},this.context,null,i)},Rt.destroy=function(){this.vm.destroy(),this.context=this.vm=this.backup=this.$=null};var Ft=tt.extend({init:function(t,e){this._config=this.cover(t,{target:null,tag:"div","class":"",css:null,attr:null,html:"",template:"",tplParam:null,model:null,cbRender:"viewReady"}),this.$=nt,this.el=null,this.vm=null,this._ready=!1,z.isFunc(this.beforeRender)&&this.beforeRender(),this.getConfig("template")?this._loadTemplate():this._render()},_loadTemplate:function(){var t=this.getConfig(),e=t.template;G.load(e,t.tplParam,function(t,i){var n;t?(n=t.status+": "+e,z.warn(t)):n=i.result,this.setConfig("html",n),this._render()},this)},_conf:function(t,e,i){var n,s=i!==n;if(!e)return t;for(var a=e.split("/");a.length>1&&z.hasOwn(t,a[0]);)t=t[a.shift()];return e=a[0],s?(t[e]=i,!0):t[e]},_render:function(){if(this._ready)return this;this._ready=!0;var t=this.getConfig(),e=t.target,i=e instanceof HTMLElement;i?this.el=z.createElement(t.tag):this.el=document.querySelector(e);var n=t["class"];n&&z.isString(n)&&z.each(n.split(" "),function(t){nt.addClass(this.el,t)},this),z.isObject(t.css)&&z.each(t.css,function(t,e){this.el.style[e]=t},this),z.isObject(t.attr)&&z.each(t.attr,function(t,e){nt.setAttr(this.el,e,t)},this),t.html&&this.el.appendChild(z.stringToFragment(t.html));var s=t.model;z.isObject(s)&&(this.vm=new U(this.el,s,this)),i&&e.appendChild(this.el);var a=this[t.cbRender];z.isFunc(a)&&a.call(this)},cover:function(t,e){return e||z.warn("Failed to cover config, 2 argumenst required"),z.extend(!0,{},e,t)},getConfig:function(t){return this._conf(this._config,t)},setConfig:function(t,e){return this._conf(this._config,t,e)},query:function(t){return this.el.querySelector(t)},queryAll:function(t){return this.el.querySelectorAll(t)},bind:function(t,e,i,n){return z.isString(i)&&(i=this[i]),at.add(t,e,i,n,this)},unbind:function(t,e,i,n){return z.isString(i)&&(i=this[i]),at.remove(t,e,i,n)},afterDestroy:function(){var t=this.vm,e=this.el,i=this.getConfig("target");t&&t.destroy(),i&&i.removeChild(e),this.$=e=t=null}}),Tt=new J;return Tt});